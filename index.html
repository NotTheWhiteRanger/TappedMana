<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TappedMana | Commander Hub</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mana-font@latest/css/mana.min.css" />
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
      import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";

      const firebaseConfig = {
        apiKey: "AIzaSyDwKnA0x8VGYk4CLiqPRYRL5xMy4Zdpu3c",
        authDomain: "new-chat-8d4f4.firebaseapp.com",
        projectId: "new-chat-8d4f4",
        storageBucket: "new-chat-8d4f4.appspot.com",
        messagingSenderId: "998012770880",
        appId: "1:998012770880:web:0b9cf74d0a92836b65a6d4",
        databaseURL: "https://new-chat-8d4f4-default-rtdb.firebaseio.com"
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      window.addEventListener('DOMContentLoaded', () => {
        const nav = document.querySelector('nav');
        if (!nav) return;

        const links = nav.querySelectorAll('a');
        const logoutLink = links[links.length - 1];

        onAuthStateChanged(auth, user => {
          if (user) {
            const welcome = document.createElement('span');
            welcome.textContent = `Welcome, ${user.email}`;
            welcome.style.color = '#e0f2fe';
            welcome.style.marginRight = '1rem';
            nav.insertBefore(welcome, nav.firstChild);

            logoutLink.textContent = 'Logout';
            logoutLink.addEventListener('click', e => {
              e.preventDefault();
              signOut(auth).then(() => location.reload());
            });
          } else {
            logoutLink.textContent = 'Login';
            logoutLink.setAttribute('href', '/login');
          }
        });
      });
    </script>
  </head>
  <body>
    <!-- HTML content continues... -->
  </body>
</html>
